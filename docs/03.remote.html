<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.2">
<title>ABS Remote API</title>
<link rel="stylesheet" href="./css/asciidoctor.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/github.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
</head>
<body class="book toc2 toc-right">
<div id="header">
<h1>ABS Remote API</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>

</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>ABS API provides an extension modules to enable using actors in a distributed setting.
In a distributed setting, each JVM instance contains a set of actors.
The following properties holds when using the remote API:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Location Reference Transparency</strong>:
Actors are blind to the location of the reference that they use to communicate with other actors.
Either in a local or remote setting, an actor may use an instance of <code>Reference</code> to refer to another actor.
The referred actor may be local or remote and this is transparent for the calling actor.</p>
</li>
<li>
<p><strong>Communication Transparency</strong>:
Actors send and receive messages.
The transport of each message and how it is transferred to the receiver of the message is transparent to the sender of the message.
The extension of ABS API provides a transparent way to provide a container of actors that can be accessed through HTTP.
The communication of the messages through HTTP is handled by the Remote API implementation and abstracted from the user of the API.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In the following, we provide a simple actor <code>Echo</code>:</p>
</div>
<div class="listingblock">
<div class="title">Echo.java</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java" data-lang="java">public class Echo implements Actor, Behavior {
	private static final long serialVersionUID = 1L;
	private final Logger logger = LoggerFactory.getLogger(getClass());
	private final Integer index;

	public Echo(Integer i) {
		this.index = i;
	}

	@Override
	public Object respond(Object message) {
		logger.error("echo#{} --- message: {} --- from: {}", index, message, sender());
		send(sender(), "an echo from " + index);
		return null;
	}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To demonstrate how this actor can be used with ABS Remote API, we create two separate actor servers:</p>
</div>
<div class="listingblock">
<div class="title">Main1.java</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java" data-lang="java">public class Main1 {
	public static void main(String[] args) throws UnknownHostException {
		Properties props1 = new Properties();
		props1.put("host", "localhost");
		props1.put("port", "7777");
		ActorServer server1 = new ActorServer(props1);
		Echo e1 = new Echo(1);
		Actor a1 = server1.context.newActor("echo-1", e1);
		System.out.println(" === actor: " + a1.name());
	}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>and also the second actor which is similar:</p>
</div>
<div class="listingblock">
<div class="title">Main2.java</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java" data-lang="java">public class Main2 {
	public static void main(String[] args) throws UnknownHostException {
		Properties props2 = new Properties();
		props2.put("host", "localhost");
		props2.put("port", "8888");
		ActorServer server2 = new ActorServer(props2);
		Echo e2 = new Echo(2);
		Actor a2 = server2.context.newActor("echo-2", e2);
		a2.send(Reference.from("abs://echo-1@http://localhost:7777"), "a msg from echo-2");
	}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As the result of running the program, you can follow a trace of remote message.
Note that the API for the actors do not change and its part of transparent implementation in the server.
A complete source of this example is available at: <a href="https://github.com/CrispOSS/abs-api-remote-sample" class="bare">https://github.com/CrispOSS/abs-api-remote-sample</a></p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2015-01-25 15:50:26 +01:00
</div>
</div>
</body>
</html>